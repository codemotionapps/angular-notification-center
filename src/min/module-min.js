!function(i,t){"use strict";"undefined"!=typeof module&&module.exports?(t("undefined"==typeof angular?require("angular"):angular),module.exports="ngDialog"):"function"==typeof define&&define.amd?define(["angular"],t):t(i.angular)}(this,function(i){"use strict";i.module("notificationCenter",[]).provider("notification",function(){function t(){f=!0,u.forEach(function(i){i()})}var n,o,e,a,s,c=!1,f=!1,r=!1,l=!1,u=[],d=[],h="true"===localStorage.getItem("disabledNotifications"),p="Notification"in window&&void 0!==Notification&&"granted"===Notification.permission?!0:!1,N={value:0,set:function(i){this.value=i},plus1:function(){this.value++}},g={value:!1,set:function(i){this.value=i,this.callbacks.forEach(function(t){t(i)})},get:function(){return this.value},callbacks:[],addCallback:function(i){this.callbacks.push(i)}};this.loading=g,a=function(t,n,o){var e;if(t.ready=notificationToString(t),t.hasOwnProperty("pushFront"))if("False"==t.seen&&(r=!0,N.plus1()),d.unshift(t),this.inlineNotification)ngToast.create({className:"notifi-cell",content:e.innerHTML}),todoApp.user.getAttribute("notifications_sounds")&&ngAudio.play("sound/notification.wav");else{e=i.element("<div></div>"),e.html($templateCache.get(NCSigleNTemlpateURL)),n=$scope.$new(),n.notification=t,o(e)(n);var a=e.text().replace(/\s\s+/g," ");new spawnNotification("Ora",a,$rootScope.clickNotification,h)}else d.push(t);t.last&&(console.log(d),e=parseInt(t.unseen)||0,N.set(e),e>0&&(r=!0),g.set(!1))},this.setPermission=function(i){i===!0&&c!==!0&&n(),c=i},this.noMoreNotificationsAdd=function(i){u.push(i)},this.getDeveloperNotifications=function(i){n=i},this.loadMoreNotifications=function(i){o=i},this.seeNotifications=function(i){e=i},this.inlineNotification=function(i){s=!i},this.$get=function(){return{notifications:function(){return d},allNotificationsLoaded:function(){return f},loadMoreNotifications:function(){g.get()||(g.set(!0),o(d.length))},seeNotifications:function(){e();for(var i=0;i<d.length;i++)"False"==d[i].seen&&(d[i].seen="True");N.set(0)},noMoreNotificationsAdd:this.noMoreNotificationsAdd,inlineNotification:this.inlineNotification,setPermission:this.setPermission,newNotification:a,noMoreNotifications:t,loading:g,unreadNotifications:N}}}).directive("notificationCenter",["notification",function(i){return{restrict:"A",templateUrl:NCTemplateURL,scope:!1,link:function(t,n,o){i.seeNotifications()}}}]).directive("singleNotification",["notification",function(i){return{restrict:"A",templateUrl:NCSigleNTemlpateURL,scope:!0}}])});